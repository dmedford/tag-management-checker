# Static Site Generators Configuration
# Jekyll, Hugo, Gatsby, 11ty, Astro, etc.

services:
  # Jekyll (Ruby-based)
  - type: static
    name: jekyll-site
    buildCommand: |
      cd jekyll-site
      bundle install
      bundle exec jekyll build
    staticPublishPath: ./jekyll-site/_site
    domains:
      - blog.yourdomain.com
    autoDeploy: true
    branch: main

  # Hugo (Go-based)
  - type: static
    name: hugo-site
    buildCommand: |
      cd hugo-site
      # Install Hugo
      wget https://github.com/gohugoio/hugo/releases/download/v0.120.0/hugo_extended_0.120.0_Linux-64bit.tar.gz
      tar -xzf hugo_extended_0.120.0_Linux-64bit.tar.gz
      chmod +x hugo
      ./hugo --minify
    staticPublishPath: ./hugo-site/public
    domains:
      - hugo.yourdomain.com
    autoDeploy: true
    branch: main

  # Gatsby (React-based)
  - type: static
    name: gatsby-site
    buildCommand: |
      cd gatsby-site
      npm install
      npm run build
    staticPublishPath: ./gatsby-site/public
    envVars:
      - key: GATSBY_API_URL
        value: https://tag-management-checker.onrender.com
    domains:
      - gatsby.yourdomain.com
    autoDeploy: true
    branch: main

  # 11ty (Eleventy)
  - type: static
    name: eleventy-site
    buildCommand: |
      cd eleventy-site
      npm install
      npm run build
    staticPublishPath: ./eleventy-site/_site
    domains:
      - eleventy.yourdomain.com
    autoDeploy: true
    branch: main

  # Astro (Modern framework)
  - type: static
    name: astro-site
    buildCommand: |
      cd astro-site
      npm install
      npm run build
    staticPublishPath: ./astro-site/dist
    routes:
      # Handle dynamic routes if using Astro routing
      - type: rewrite
        source: /blog/:slug
        destination: /blog/[slug].html
    envVars:
      - key: PUBLIC_API_URL
        value: https://tag-management-checker.onrender.com
    domains:
      - astro.yourdomain.com
    autoDeploy: true
    branch: main

  # Docusaurus (Documentation)
  - type: static
    name: docs-site
    buildCommand: |
      cd docs
      npm install
      npm run build
    staticPublishPath: ./docs/build
    routes:
      # Handle Docusaurus routing
      - type: rewrite
        source: /docs/*
        destination: /docs/:splat
    domains:
      - docs.yourdomain.com
    autoDeploy: true
    branch: main